!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.triangulate=t()}}(function(){return function t(e,n,r){function a(i,u){if(!n[i]){if(!e[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[i]={exports:{}};e[i][0].call(s.exports,function(t){var n=e[i][1][t];return a(n?n:t)},s,s.exports,t,e,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=t("promise-polyfill"),i=r(o),u=t("./input/sanitizeInput"),f=r(u),l=t("./input/browser/fromImageToImageData"),s=r(l),c=t("./output/polygonsToImageData"),d=r(c),h=t("./output/polygonsToDataURL"),g=r(h),y=t("./output/polygonsToSVG"),p=r(y),v=t("./polygons/imageDataToPolygons"),m=r(v),x=t("webworkify"),w=r(x),b=t("./workers/triangulationWorker"),_=r(b);n["default"]=function(t){function e(){return t}function n(){var t=a({},U);return W||a(t,J),t}function r(){var t=a({},U);return L||a(t,A),t}function o(t){return P(s["default"],t)}function u(t){return P(s["default"],t,!0)}function l(t){return P(function(t){return t},t)}function c(t){return P(function(t){return t},t,!0)}function h(t){return I(function(t){return t},t)}function y(t){return I(function(t){return t},t,!0)}function v(t){return I(g["default"],t)}function x(t){return I(g["default"],t,!0)}function b(t){return I(d["default"],t)}function M(t){return I(d["default"],t,!0)}function D(t){return I(p["default"],t)}function k(t){return I(p["default"],t,!0)}function P(t,e,n){return S=!!n,W=function(){return S?t(e):new i["default"](function(n,r){try{var a=t(e);n(a)}catch(o){r(o)}})},C()?j():r()}function I(t,e,r){return N=!!r,L=function(n,r){return N?t(n,r,e):new i["default"](function(a,o){try{var i=t(n,r,e);a(i)}catch(u){o(u)}})},C()?j():n()}function C(){return W&&L}function j(){if(S&&N){var e=W(t),n=(0,m["default"])(e,t),r=L(n,e);return r}return new i["default"](function(e,n){var r;O().then(function(e){return r=e,T(r,t)},n).then(function(t){return E(t,r)},n).then(function(t){e(t)},n)})}function O(t){return new i["default"](function(e,n){if(S)try{var r=W(t);e(r)}catch(a){n(a)}else W(t).then(e,n)})}function T(t,e){return new i["default"](function(n,r){R.addEventListener("message",function(t){if(t.data&&t.data.polygonJSONStr){var e=JSON.parse(t.data.polygonJSONStr);n(e)}else r(t.data&&t.data.err?t.data.err:t)}),R.postMessage({params:e,imageData:t,imageDataWidth:t.width,imageDataHeight:t.height})})}function E(t,e){return new i["default"](function(n,r){if(N)try{var a=L(t,e);n(a)}catch(o){r(o)}else L(t,e).then(n,r)})}t=(0,f["default"])(t);var S=!1,N=!1,R=(0,w["default"])(_["default"]),W=void 0,L=void 0,U={getParams:e,getInput:n,getOutput:r},J={fromImage:o,fromImageSync:u,fromImageData:l,fromImageDataSync:c},A={toData:h,toDataSync:y,toDataURL:v,toDataURLSync:x,toImageData:b,toImageDataSync:M,toSVG:D,toSVGSync:k};return n()},e.exports=n["default"]},{"./input/browser/fromImageToImageData":5,"./input/sanitizeInput":7,"./output/polygonsToDataURL":8,"./output/polygonsToImageData":9,"./output/polygonsToSVG":10,"./polygons/imageDataToPolygons":14,"./workers/triangulationWorker":18,"promise-polyfill":21,webworkify:23}],2:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("canvas-browserify"),o=r(a);n["default"]=function(t){if("undefined"==typeof Uint8ClampedArray){if("undefined"==typeof window)throw new Error("Can't copy imageData in Webworker without Uint8ClampedArray support.");var e=(0,o["default"])(t.width,t.height),n=e.getContext("2d");return n.putImageData(t,0,0),n.getImageData(0,0,t.width,t.height)}return{width:t.width,height:t.height,data:new Uint8ClampedArray(t.data)}},e.exports=n["default"]},{"canvas-browserify":19}],3:[function(t,e,n){"use strict";function r(t){var e,n=[],r=2*t+1,a=r*r,o=.5*a|0;for(e=0;a>e;e++)n[e]=e===o?-a+1:1;return n}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n,a){var o=r(n).slice(),i=parseInt(10*(e||.5),10)||1;a=a||1;var u,f,l=a?1/a:0;if(1!==l)for(u=0,f=o.length;u<o.length;u++)o[u]*=l;var s=t.data;f=s.length>>2;var c=new Uint8Array(f);for(_=0;f>_;_++)c[_]=s[_<<2];var d,h,g,y,p,v,m,x,w,b,_,M,D,k,P=0|t.width,I=0|t.height,C=Math.sqrt(o.length),j=.5*C|0;for(h=0;I>h;h+=i)for(M=h*P,d=0;P>d;d+=i){for(g=y=p=0,x=-j;j>=x;x++)if(b=h+x,D=b*P,k=(x+j)*C,b>=0&&I>b)for(m=-j;j>=m;m++)w=d+m,w>=0&&P>w&&(v=o[m+j+k])&&(g+=c[w+D]*v);0>g?g=0:g>255&&(g=255),s[d+M<<2]=255&g}return t},e.exports=n["default"]},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){for(var e=t.data.length,n=t.data,r=void 0,a=0;e>a;a+=4)r=.34*n[a]+.5*n[a+1]+.16*n[a+2],n[a]=r,n[a+1]=r,n[a+2]=r;return t.data=n,t},e.exports=n["default"]},{}],5:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("canvas-browserify"),o=r(a);o["default"].Image;n["default"]=function(t){if(t instanceof HTMLImageElement){if(!t.naturalWidth||!t.naturalHeight||t.complete===!1)throw new Error("This this image hasn't finished loading: "+t.src);var e=new o["default"](t.naturalWidth,t.naturalHeight),n=e.getContext("2d");n.drawImage(t,0,0,e.width,e.height);var r=n.getImageData(0,0,e.width,e.height);return r.data&&r.data.length&&("undefined"==typeof r.width&&(r.width=t.naturalWidth),"undefined"==typeof r.height&&(r.height=t.naturalHeight)),r}throw new Error("This object does not seem to be an image.")},e.exports=n["default"]},{"canvas-browserify":19}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={accuracy:.7,blur:40,fill:!0,stroke:!0,strokeWidth:.5,lineJoin:"miter",vertexCount:700},e.exports=n["default"]},{}],7:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("../util/clamp"),o=r(a),i=t("./defaultParams"),u=r(i),f=["miter","round","bevel"];n["default"]=function(t){return"object"!=typeof t&&(t={}),"number"!=typeof t.accuracy||isNaN(t.accuracy)?t.accuracy=u["default"].accuracy:t.accuracy=(0,o["default"])(t.accuracy,0,1),("number"!=typeof t.blur||isNaN(t.blur))&&(t.blur=u["default"].blur),t.blur<=0&&(t.blur=1),"string"!=typeof t.fill&&"boolean"!=typeof t.fill&&(t.fill=u["default"].fill),"string"!=typeof t.stroke&&"boolean"!=typeof t.stroke&&(t.stroke=u["default"].stroke),("number"!=typeof t.strokeWidth||isNaN(t.strokeWidth))&&(t.strokeWidth=u["default"].strokeWidth),("string"!=typeof t.lineJoin||-1===f.indexOf(t.lineJoin))&&(t.lineJoin=u["default"].lineJoin),("number"!=typeof t.vertexCount||isNaN(t.vertexCount))&&(t.vertexCount=u["default"].vertexCount),t.vertexCount<=0&&(t.vertexCount=1),t},e.exports=n["default"]},{"../util/clamp":15,"./defaultParams":6}],8:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("canvas-browserify"),o=r(a),i=t("../util/drawPolygonsOnContext"),u=r(i);n["default"]=function(t,e,n){var r=n&&n.dpr?n.dpr:1,a=n&&n.backgroundColor?n.backgroundColor:!1,i=new o["default"](e.width*r,e.height*r),f=i.getContext("2d");return a&&(f.fillStyle=a,f.fillRect(0,0,e.width*r,e.height*r),f.fillStyle="transparent"),(0,u["default"])(f,t,e,r),i.toDataURL()},e.exports=n["default"]},{"../util/drawPolygonsOnContext":16,"canvas-browserify":19}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("canvas-browserify"),o=r(a),i=t("../util/drawPolygonsOnContext"),u=r(i);n["default"]=function(t,e,n){var r=n&&n.dpr?n.dpr:1,a=n&&n.backgroundColor?n.backgroundColor:!1,i=new o["default"](e.width*r,e.height*r),f=i.getContext("2d");return a&&(f.fillStyle=a,f.fillRect(0,0,e.width*r,e.height*r),f.fillStyle="transparent"),(0,u["default"])(f,t,e,r),f.getImageData(0,0,e.width*r,e.height*r)},e.exports=n["default"]},{"../util/drawPolygonsOnContext":16,"canvas-browserify":19}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e){var n='<?xml version="1.0" standalone="yes"?>\n<svg width="'+e.width+'" height="'+e.height+'" xmlns="http://www.w3.org/2000/svg" version="1.1" >\n	';return t.forEach(function(t,e){var r=t.a,a=t.b,o=t.c;n+='<polygon points="'+r.x+","+r.y+" "+a.x+","+a.y+" "+o.x+","+o.y+'"',n+=t.fill?' fill="'+t.fill+'"':' fill="transparent"',t.strokeColor&&(n+=' stroke="'+t.strokeColor+'" stroke-width="'+t.strokeWidth+'" stroke-linejoin="'+t.lineJoin+'"'),n+="/>\n	"}),n+="\n</svg>"},e.exports=n["default"]},{}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n){var r=0,a=void 0,o=void 0,i=n.fill,u="string"==typeof i?n.fill:!1,f=n.stroke,l="string"==typeof f?n.stroke:!1,s=n.strokeWidth,c=n.lineJoin,d=void 0,h=void 0,g=void 0;return t.forEach(function(t,n){a=.33333*(t.a.x+t.b.x+t.c.x),o=.33333*(t.a.y+t.b.y+t.c.y),r=(0|a)+(0|o)*e.width<<2,d=e.data[r],h=e.data[r+1],g=e.data[r+2],i&&(t.fill=u||"rgb("+d+", "+h+", "+g+")"),f&&(l?t.strokeColor=l:t.strokeColor="rgb("+d+", "+h+", "+g+")",t.strokeWidth=s,t.lineJoin=c)}),t},e.exports=n["default"]},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n){var r,a,o,i,u,f,l,s,c,d=parseInt(10*(n||.1),10)||1,h=e,g=t.width,y=t.height,p=t.data,v=[];for(a=0;y>a;a+=d)for(r=0;g>r;r+=d){for(s=c=0,o=-1;1>=o;o++)if(f=a+o,l=f*g,f>=0&&y>f)for(i=-1;1>=i;i++)u=r+i,u>=0&&g>u&&(s+=p[u+l<<2],c++);c&&(s/=c),s>h&&v.push({x:r,y:a})}return v},e.exports=n["default"]},{}],13:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){return t.x*t.y-e.y*e.x}Object.defineProperty(n,"__esModule",{value:!0});var o=t("../util/clamp"),i=r(o);n["default"]=function(t,e,n,r,o){var u=[],f=2*Math.ceil(r/(100-n))+2*Math.ceil(o/(100-n))+2,l=Math.max(t.length,e),s=(0,i["default"])(l-f,0,e-f),c=l/s,d=0,h=0,g=0,y=0;for(t.sort(a),d=0,y=l;y>d;d+=c)u.push({x:t[~~d].x,y:t[~~d].y});for(h=0;r>h;h+=100-n)u.push({x:~~h,y:0}),u.push({x:~~h,y:o});for(g=0;o>g;g+=100-n)u.push({x:0,y:~~g}),u.push({x:r,y:~~g});return u.push({x:0,y:o}),u.push({x:r,y:o}),t=null,u},e.exports=n["default"]},{"../util/clamp":15}],14:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("stackblur-canvas"),o=r(a),i=t("delaunay-fast"),u=r(i),f=t("../util/isImageData"),l=r(f),s=t("../imagedata/copyImageData"),c=r(s),d=t("../imagedata/greyscale"),h=r(d),g=t("../imagedata/detectEdges"),y=r(g),p=t("./getEdgePoints"),v=r(p),m=t("./getVerticesFromPoints"),x=r(m),w=t("./addColorToPolygons"),b=r(w);n["default"]=function(t,e){if((0,l["default"])(t)){var n={width:t.width,height:t.height},r=(0,c["default"])(t),a=(0,c["default"])(t),i=o["default"].imageDataRGBA(r,0,0,n.width,n.height,e.blur),f=(0,h["default"])(i),s=(0,y["default"])(f),d=(0,v["default"])(s,50,e.accuracy),g=(0,x["default"])(d,e.vertexCount,e.accuracy,n.width,n.height),p=u["default"].triangulate(g);return(0,b["default"])(p,a,e)}throw new Error("Can't work with the imageData provided. It seems to be corrupt.")},e.exports=n["default"]},{"../imagedata/copyImageData":2,"../imagedata/detectEdges":3,"../imagedata/greyscale":4,"../util/isImageData":17,"./addColorToPolygons":11,"./getEdgePoints":12,"./getVerticesFromPoints":13,"delaunay-fast":20,"stackblur-canvas":22}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n){return e>t?e:t>n?n:t},e.exports=n["default"]},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n,r){return r=r||1,e.forEach(function(e,n){t.beginPath(),t.moveTo(e.a.x*r,e.a.y*r),t.lineTo(e.b.x*r,e.b.y*r),t.lineTo(e.c.x*r,e.c.y*r),t.lineTo(e.a.x*r,e.a.y*r),e.fill&&(t.fillStyle=e.fill,t.fill()),e.strokeColor&&(t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeWidth*r,t.lineJoin=e.lineJoin,t.stroke()),t.closePath()}),t},e.exports=n["default"]},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){return t&&"number"==typeof t.width&&"number"==typeof t.height&&t.data&&"number"==typeof t.data.length},e.exports=n["default"]},{}],18:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){t.addEventListener("message",function(e){if(e.data.imageData&&e.data.params)try{var n=e.data.imageData;"undefined"==typeof n.width&&"number"==typeof e.data.imageDataWidth&&(n.width=e.data.imageDataWidth),"undefined"==typeof n.height&&"number"==typeof e.data.imageDataHeight&&(n.height=e.data.imageDataHeight);var r=(0,i["default"])(e.data.imageData,e.data.params);t.postMessage({polygonJSONStr:JSON.stringify(r)})}catch(a){t.postMessage({err:a.message||a})}else e.data.imageData?t.postMessage({err:"Parameters are missing."}):t.postMessage({err:"ImageData is missing."});t.close()})}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var o=t("../polygons/imageDataToPolygons"),i=r(o);e.exports=n["default"]},{"../polygons/imageDataToPolygons":14}],19:[function(t,e,n){var r=e.exports=function(t,e){var n=document.createElement("canvas");return n.width=t||300,n.height=e||150,n};r.Image=function(){var t=document.createElement("img");return t}},{}],20:[function(t,e,n){function r(t,e,n){this.a=t,this.b=e,this.c=n;var r,a,o,i,u=e.x-t.x,f=e.y-t.y,l=n.x-t.x,s=n.y-t.y,c=u*(t.x+e.x)+f*(t.y+e.y),d=l*(t.x+n.x)+s*(t.y+n.y),h=2*(u*(n.y-e.y)-f*(n.x-e.x));Math.abs(h)<1e-6?(r=Math.min(t.x,e.x,n.x),a=Math.min(t.y,e.y,n.y),o=.5*(Math.max(t.x,e.x,n.x)-r),i=.5*(Math.max(t.y,e.y,n.y)-a),this.x=r+o,this.y=a+i,this.r=o*o+i*i):(this.x=(s*c-f*d)/h,this.y=(u*d-l*c)/h,o=this.x-t.x,i=this.y-t.y,this.r=o*o+i*i)}function a(t,e){return e.x-t.x}function o(t){var e,n,r,a,o,i=t.length;t:for(;i;)for(n=t[--i],e=t[--i],r=i;r;)if(o=t[--r],a=t[--r],e===a&&n===o||e===o&&n===a){t.splice(i,2),t.splice(r,2),i-=2;continue t}}function i(t){if(t.length<3)return[];t.sort(a);for(var e=t.length-1,n=t[e].x,i=t[0].x,u=t[e].y,f=u;e--;)t[e].y<u&&(u=t[e].y),t[e].y>f&&(f=t[e].y);var l,s,c,d=i-n,h=f-u,g=d>h?d:h,y=.5*(i+n),p=.5*(f+u),v=[new r({x:y-20*g,y:p-g,__sentinel:!0},{x:y,y:p+20*g,__sentinel:!0},{x:y+20*g,y:p-g,__sentinel:!0})],m=[],x=[];for(e=t.length;e--;){for(x.length=0,l=v.length;l--;)d=t[e].x-v[l].x,d>0&&d*d>v[l].r?(m.push(v[l]),v.splice(l,1)):(h=t[e].y-v[l].y,d*d+h*h>v[l].r||(x.push(v[l].a,v[l].b,v[l].b,v[l].c,v[l].c,v[l].a),v.splice(l,1)));for(o(x),l=x.length;l;)c=x[--l],s=x[--l],v.push(new r(s,c,t[e]))}for(Array.prototype.push.apply(m,v),e=m.length;e--;)(m[e].a.__sentinel||m[e].b.__sentinel||m[e].c.__sentinel)&&m.splice(e,1);return m}r.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.x,this.a.y),t.lineTo(this.b.x,this.b.y),t.lineTo(this.c.x,this.c.y),t.closePath(),t.stroke()},"undefined"!=typeof e&&(e.exports={Triangle:r,triangulate:i})},{}],21:[function(t,e,n){!function(t){function n(t,e){return function(){t.apply(e,arguments)}}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(t,n(o,this),n(i,this))}function a(t){var e=this;return null===this._state?void this._deferreds.push(t):void c(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return void(e._state?t.resolve:t.reject)(e._value);var r;try{r=n(e._value)}catch(a){return void t.reject(a)}t.resolve(r)})}function o(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void l(n(e,t),n(o,this),n(i,this))}this._state=!0,this._value=t,u.call(this)}catch(r){i.call(this,r)}}function i(t){this._state=!1,this._value=t,u.call(this)}function u(){for(var t=0,e=this._deferreds.length;e>t;t++)a.call(this,this._deferreds[t]);this._deferreds=null}function f(t,e,n,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r}function l(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(a){if(r)return;r=!0,n(a)}}var s=setTimeout,c="function"==typeof setImmediate&&setImmediate||function(t){s(t,1)},d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=this;return new r(function(r,o){a.call(n,new f(t,e,r,o))})},r.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new r(function(e,n){function r(o,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var u=i.then;if("function"==typeof u)return void u.call(i,function(t){r(o,t)},n)}t[o]=i,0===--a&&e(t)}catch(f){n(f)}}if(0===t.length)return e([]);for(var a=t.length,o=0;o<t.length;o++)r(o,t[o])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){for(var r=0,a=t.length;a>r;r++)t[r].then(e,n)})},r._setImmediateFn=function(t){c=t},"undefined"!=typeof e&&e.exports?e.exports=r:t.Promise||(t.Promise=r)}(this)},{}],22:[function(t,e,n){function r(t,e,n,r){if("string"==typeof t)var t=document.getElementById(t);else if(!t instanceof HTMLImageElement)return;var a=t.naturalWidth,i=t.naturalHeight;if("string"==typeof e)var e=document.getElementById(e);else if(!e instanceof HTMLCanvasElement)return;e.style.width=a+"px",e.style.height=i+"px",e.width=a,e.height=i;var f=e.getContext("2d");f.clearRect(0,0,a,i),f.drawImage(t,0,0),isNaN(n)||1>n||(r?o(e,0,0,a,i,n):u(e,0,0,a,i,n))}function a(t,e,n,r,a){if("string"==typeof t)var t=document.getElementById(t);else if(!t instanceof HTMLCanvasElement)return;var o,i=t.getContext("2d");try{try{o=i.getImageData(e,n,r,a)}catch(u){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=i.getImageData(e,n,r,a)}catch(u){throw alert("Cannot access local image"),new Error("unable to access local image data: "+u)}}}catch(u){throw alert("Cannot access image"),new Error("unable to access image data: "+u)}return o}function o(t,e,n,r,o,u){if(!(isNaN(u)||1>u)){u|=0;var f=a(t,e,n,r,o);f=i(f,e,n,r,o,u),t.getContext("2d").putImageData(f,e,n)}}function i(t,e,n,r,a,o){var i,u,f,d,h,g,y,p,v,m,x,w,b,_,M,D,k,P,I,C,j,O,T,E,S=t.data,N=o+o+1,R=r-1,W=a-1,L=o+1,U=L*(L+1)/2,J=new l,A=J;for(f=1;N>f;f++)if(A=A.next=new l,f==L)var H=A;A.next=J;var B=null,G=null;y=g=0;var q=s[o],F=c[o];for(u=0;a>u;u++){for(D=k=P=I=p=v=m=x=0,w=L*(C=S[g]),b=L*(j=S[g+1]),_=L*(O=S[g+2]),M=L*(T=S[g+3]),p+=U*C,v+=U*j,m+=U*O,x+=U*T,A=J,f=0;L>f;f++)A.r=C,A.g=j,A.b=O,A.a=T,A=A.next;for(f=1;L>f;f++)d=g+((f>R?R:f)<<2),p+=(A.r=C=S[d])*(E=L-f),v+=(A.g=j=S[d+1])*E,m+=(A.b=O=S[d+2])*E,x+=(A.a=T=S[d+3])*E,D+=C,k+=j,P+=O,I+=T,A=A.next;for(B=J,G=H,i=0;r>i;i++)S[g+3]=T=x*q>>F,0!=T?(T=255/T,S[g]=(p*q>>F)*T,S[g+1]=(v*q>>F)*T,S[g+2]=(m*q>>F)*T):S[g]=S[g+1]=S[g+2]=0,p-=w,v-=b,m-=_,x-=M,w-=B.r,b-=B.g,_-=B.b,M-=B.a,d=y+((d=i+o+1)<R?d:R)<<2,D+=B.r=S[d],k+=B.g=S[d+1],P+=B.b=S[d+2],I+=B.a=S[d+3],p+=D,v+=k,m+=P,x+=I,B=B.next,w+=C=G.r,b+=j=G.g,_+=O=G.b,M+=T=G.a,D-=C,k-=j,P-=O,I-=T,G=G.next,g+=4;y+=r}for(i=0;r>i;i++){for(k=P=I=D=v=m=x=p=0,g=i<<2,w=L*(C=S[g]),b=L*(j=S[g+1]),_=L*(O=S[g+2]),M=L*(T=S[g+3]),p+=U*C,v+=U*j,m+=U*O,x+=U*T,A=J,f=0;L>f;f++)A.r=C,A.g=j,A.b=O,A.a=T,A=A.next;for(h=r,f=1;o>=f;f++)g=h+i<<2,p+=(A.r=C=S[g])*(E=L-f),v+=(A.g=j=S[g+1])*E,m+=(A.b=O=S[g+2])*E,x+=(A.a=T=S[g+3])*E,D+=C,k+=j,P+=O,I+=T,A=A.next,W>f&&(h+=r);for(g=i,B=J,G=H,u=0;a>u;u++)d=g<<2,S[d+3]=T=x*q>>F,T>0?(T=255/T,S[d]=(p*q>>F)*T,S[d+1]=(v*q>>F)*T,S[d+2]=(m*q>>F)*T):S[d]=S[d+1]=S[d+2]=0,p-=w,v-=b,m-=_,x-=M,w-=B.r,b-=B.g,_-=B.b,M-=B.a,d=i+((d=u+L)<W?d:W)*r<<2,p+=D+=B.r=S[d],v+=k+=B.g=S[d+1],m+=P+=B.b=S[d+2],x+=I+=B.a=S[d+3],B=B.next,w+=C=G.r,b+=j=G.g,_+=O=G.b,M+=T=G.a,D-=C,k-=j,P-=O,I-=T,G=G.next,g+=r}return t}function u(t,e,n,r,o,i){if(!(isNaN(i)||1>i)){i|=0;var u=a(t,e,n,r,o);u=f(u,e,n,r,o,i),t.getContext("2d").putImageData(u,e,n)}}function f(t,e,n,r,a,o){var i,u,f,d,h,g,y,p,v,m,x,w,b,_,M,D,k,P,I,C,j=t.data,O=o+o+1,T=r-1,E=a-1,S=o+1,N=S*(S+1)/2,R=new l,W=R;for(f=1;O>f;f++)if(W=W.next=new l,f==S)var L=W;W.next=R;var U=null,J=null;y=g=0;var A=s[o],H=c[o];for(u=0;a>u;u++){for(_=M=D=p=v=m=0,x=S*(k=j[g]),w=S*(P=j[g+1]),b=S*(I=j[g+2]),p+=N*k,v+=N*P,m+=N*I,W=R,f=0;S>f;f++)W.r=k,W.g=P,W.b=I,W=W.next;for(f=1;S>f;f++)d=g+((f>T?T:f)<<2),p+=(W.r=k=j[d])*(C=S-f),v+=(W.g=P=j[d+1])*C,m+=(W.b=I=j[d+2])*C,_+=k,M+=P,D+=I,W=W.next;for(U=R,J=L,i=0;r>i;i++)j[g]=p*A>>H,j[g+1]=v*A>>H,j[g+2]=m*A>>H,p-=x,v-=w,m-=b,x-=U.r,w-=U.g,b-=U.b,d=y+((d=i+o+1)<T?d:T)<<2,_+=U.r=j[d],M+=U.g=j[d+1],D+=U.b=j[d+2],p+=_,v+=M,m+=D,U=U.next,x+=k=J.r,w+=P=J.g,b+=I=J.b,_-=k,M-=P,D-=I,J=J.next,g+=4;y+=r}for(i=0;r>i;i++){for(M=D=_=v=m=p=0,g=i<<2,x=S*(k=j[g]),w=S*(P=j[g+1]),b=S*(I=j[g+2]),p+=N*k,v+=N*P,m+=N*I,W=R,f=0;S>f;f++)W.r=k,W.g=P,W.b=I,W=W.next;for(h=r,f=1;o>=f;f++)g=h+i<<2,p+=(W.r=k=j[g])*(C=S-f),v+=(W.g=P=j[g+1])*C,m+=(W.b=I=j[g+2])*C,_+=k,M+=P,D+=I,W=W.next,E>f&&(h+=r);for(g=i,U=R,J=L,u=0;a>u;u++)d=g<<2,j[d]=p*A>>H,j[d+1]=v*A>>H,j[d+2]=m*A>>H,p-=x,v-=w,m-=b,x-=U.r,w-=U.g,b-=U.b,d=i+((d=u+S)<E?d:E)*r<<2,p+=_+=U.r=j[d],v+=M+=U.g=j[d+1],m+=D+=U.b=j[d+2],U=U.next,x+=k=J.r,w+=P=J.g,b+=I=J.b,_-=k,M-=P,D-=I,J=J.next,g+=r}return t}function l(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports={image:r,canvasRGBA:o,canvasRGB:u,imageDataRGBA:i,imageDataRGB:f}},{}],23:[function(t,e,n){var r=arguments[3],a=arguments[4],o=arguments[5],i=JSON.stringify;e.exports=function(t){for(var e,n=Object.keys(o),u=0,f=n.length;f>u;u++){var l=n[u],s=o[l].exports;if(s===t||s["default"]===t){e=l;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},u=0,f=n.length;f>u;u++){var l=n[u];c[l]=l}a[e]=[Function(["require","module","exports"],"("+t+")(self)"),c]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),h={};h[e]=e,a[d]=[Function(["require"],"var f = require("+i(e)+");(f.default ? f.default : f)(self);"),h];var g="("+r+")({"+Object.keys(a).map(function(t){return i(t)+":["+a[t][0]+","+i(a[t][1])+"]"}).join(",")+"},{},["+i(d)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(y.createObjectURL(new Blob([g],{type:"text/javascript"})))}},{}]},{},[1])(1)});
