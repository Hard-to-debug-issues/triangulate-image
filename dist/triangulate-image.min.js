!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.triangulate=t()}}(function(){return function t(e,r,n){function a(i,u){if(!r[i]){if(!e[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var s=r[i]={exports:{}};e[i][0].call(s.exports,function(t){var r=e[i][1][t];return a(r?r:t)},s,s.exports,t,e,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o=t("./input/sanitizeInput"),i=n(o),u=t("./input/browser/fromImageToImageData"),f=n(u),l=t("./output/polygonsToImageData"),s=n(l),d=t("./output/polygonsToDataURL"),c=n(d),g=t("./output/polygonsToSVG"),h=n(g),y=t("./polygons/imageDataToPolygons"),p=n(y),m=t("webworkify"),v=n(m),x=t("./workers/triangulationWorker"),w=n(x);r["default"]=function(t){function e(){return t}function r(){var t=a({},L);return W||a(t,U),t}function n(){var t=a({},L);return R||a(t,J),t}function o(t){return P(f["default"],t)}function u(t){return P(f["default"],t,!0)}function l(t){return P(function(t){return t},t)}function d(t){return P(function(t){return t},t,!0)}function g(t){return k(function(t){return t},t)}function y(t){return k(function(t){return t},t,!0)}function m(t){return k(c["default"],t)}function x(t){return k(c["default"],t,!0)}function b(t){return k(s["default"],t)}function _(t){return k(s["default"],t,!0)}function M(t){return k(h["default"],t)}function D(t){return k(h["default"],t,!0)}function P(t,e,r){return S=!!r,W=function(){return S?t(e):new Promise(function(r,n){try{var a=t(e);r(a)}catch(o){n(o)}})},C()?I():n()}function k(t,e,n){return E=!!n,R=function(r,n){return E?t(r,n,e):new Promise(function(a,o){try{var i=t(r,n,e);a(i)}catch(u){o(u)}})},C()?I():r()}function C(){return W&&R}function I(){if(S&&E){var e=W(t),r=(0,p["default"])(e,t),n=R(r,e);return n}return new Promise(function(e,r){var n;O().then(function(e){return n=e,j(n,t)},r).then(function(t){return T(t,n)},r).then(function(t){e(t)},r)})}function O(t){return new Promise(function(e,r){if(S)try{var n=W(t);e(n)}catch(a){r(a)}else W(t).then(e,r)})}function j(t,e){return new Promise(function(r,n){N.addEventListener("message",function(t){if(t.data&&t.data.polygonJSONStr){var e=JSON.parse(t.data.polygonJSONStr);r(e)}else n(t.data&&t.data.err?t.data.err:t)}),N.postMessage({params:e,imageData:t,imageDataWidth:t.width,imageDataHeight:t.height})})}function T(t,e){return new Promise(function(r,n){if(E)try{var a=R(t,e);r(a)}catch(o){n(o)}else R(t,e).then(r,n)})}t=(0,i["default"])(t);var S=!1,E=!1,N=(0,v["default"])(w["default"]),W=void 0,R=void 0,L={getParams:e,getInput:r,getOutput:n},U={fromImage:o,fromImageSync:u,fromImageData:l,fromImageDataSync:d},J={toData:g,toDataSync:y,toDataURL:m,toDataURLSync:x,toImageData:b,toImageDataSync:_,toSVG:M,toSVGSync:D};return r()},e.exports=r["default"]},{"./input/browser/fromImageToImageData":5,"./input/sanitizeInput":7,"./output/polygonsToDataURL":8,"./output/polygonsToImageData":9,"./output/polygonsToSVG":10,"./polygons/imageDataToPolygons":14,"./workers/triangulationWorker":18,webworkify:22}],2:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var a=t("canvas-browserify"),o=n(a);r["default"]=function(t){if("undefined"==typeof Uint8ClampedArray){if("undefined"==typeof window)throw new Error("Can't copy imageData in Webworker without Uint8ClampedArray support.");var e=(0,o["default"])(t.width,t.height),r=e.getContext("2d");return r.putImageData(t,0,0),r.getImageData(0,0,t.width,t.height)}return{width:t.width,height:t.height,data:new Uint8ClampedArray(t.data)}},e.exports=r["default"]},{"canvas-browserify":19}],3:[function(t,e,r){"use strict";function n(t){var e,r=[],n=2*t+1,a=n*n,o=.5*a|0;for(e=0;a>e;e++)r[e]=e===o?-a+1:1;return r}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t,e,r,a){var o=n(r).slice(),i=parseInt(10*(e||.5),10)||1;a=a||1;var u,f,l=a?1/a:0;if(1!==l)for(u=0,f=o.length;u<o.length;u++)o[u]*=l;var s=t.data;f=s.length>>2;var d=new Uint8Array(f);for(_=0;f>_;_++)d[_]=s[_<<2];var c,g,h,y,p,m,v,x,w,b,_,M,D,P,k=0|t.width,C=0|t.height,I=Math.sqrt(o.length),O=.5*I|0;for(g=0;C>g;g+=i)for(M=g*k,c=0;k>c;c+=i){for(h=y=p=0,x=-O;O>=x;x++)if(b=g+x,D=b*k,P=(x+O)*I,b>=0&&C>b)for(v=-O;O>=v;v++)w=c+v,w>=0&&k>w&&(m=o[v+O+P])&&(h+=d[w+D]*m);0>h?h=0:h>255&&(h=255),s[c+M<<2]=255&h}return t},e.exports=r["default"]},{}],4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t){for(var e=t.data.length,r=t.data,n=void 0,a=0;e>a;a+=4)n=.34*r[a]+.5*r[a+1]+.16*r[a+2],r[a]=n,r[a+1]=n,r[a+2]=n;return t.data=r,t},e.exports=r["default"]},{}],5:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var a=t("canvas-browserify"),o=n(a);o["default"].Image;r["default"]=function(t){if(t instanceof HTMLImageElement){if(!t.naturalWidth||!t.naturalHeight||t.complete===!1)throw new Error("This this image hasn't finished loading: "+t.src);var e=new o["default"](t.naturalWidth,t.naturalHeight),r=e.getContext("2d");r.drawImage(t,0,0,e.width,e.height);var n=r.getImageData(0,0,e.width,e.height);return n.data&&n.data.length&&("undefined"==typeof n.width&&(n.width=t.naturalWidth),"undefined"==typeof n.height&&(n.height=t.naturalHeight)),n}throw new Error("This object does not seem to be an image.")},e.exports=r["default"]},{"canvas-browserify":19}],6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={accuracy:.7,blur:40,fill:!0,stroke:!0,strokeWidth:.5,lineJoin:"miter",vertexCount:700},e.exports=r["default"]},{}],7:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var a=t("../util/clamp"),o=n(a),i=t("./defaultParams"),u=n(i),f=["miter","round","bevel"];r["default"]=function(t){return"object"!=typeof t&&(t={}),"number"!=typeof t.accuracy||isNaN(t.accuracy)?t.accuracy=u["default"].accuracy:t.accuracy=(0,o["default"])(t.accuracy,0,1),("number"!=typeof t.blur||isNaN(t.blur))&&(t.blur=u["default"].blur),t.blur<=0&&(t.blur=1),"string"!=typeof t.fill&&"boolean"!=typeof t.fill&&(t.fill=u["default"].fill),"string"!=typeof t.stroke&&"boolean"!=typeof t.stroke&&(t.stroke=u["default"].stroke),("number"!=typeof t.strokeWidth||isNaN(t.strokeWidth))&&(t.strokeWidth=u["default"].strokeWidth),("string"!=typeof t.lineJoin||-1===f.indexOf(t.lineJoin))&&(t.lineJoin=u["default"].lineJoin),("number"!=typeof t.vertexCount||isNaN(t.vertexCount))&&(t.vertexCount=u["default"].vertexCount),t.vertexCount<=0&&(t.vertexCount=1),t},e.exports=r["default"]},{"../util/clamp":15,"./defaultParams":6}],8:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var a=t("canvas-browserify"),o=n(a),i=t("../util/drawPolygonsOnContext"),u=n(i);r["default"]=function(t,e,r){var n=r&&r.dpr?r.dpr:1,a=r&&r.backgroundColor?r.backgroundColor:!1,i=new o["default"](e.width*n,e.height*n),f=i.getContext("2d");return a&&(f.fillStyle=a,f.fillRect(0,0,e.width*n,e.height*n),f.fillStyle="transparent"),(0,u["default"])(f,t,e,n),i.toDataURL()},e.exports=r["default"]},{"../util/drawPolygonsOnContext":16,"canvas-browserify":19}],9:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var a=t("canvas-browserify"),o=n(a),i=t("../util/drawPolygonsOnContext"),u=n(i);r["default"]=function(t,e,r){var n=r&&r.dpr?r.dpr:1,a=r&&r.backgroundColor?r.backgroundColor:!1,i=new o["default"](e.width*n,e.height*n),f=i.getContext("2d");return a&&(f.fillStyle=a,f.fillRect(0,0,e.width*n,e.height*n),f.fillStyle="transparent"),(0,u["default"])(f,t,e,n),f.getImageData(0,0,e.width*n,e.height*n)},e.exports=r["default"]},{"../util/drawPolygonsOnContext":16,"canvas-browserify":19}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t,e){var r='<?xml version="1.0" standalone="yes"?>\n<svg width="'+e.width+'" height="'+e.height+'" xmlns="http://www.w3.org/2000/svg" version="1.1" >\n	';return t.forEach(function(t,e){var n=t.a,a=t.b,o=t.c;r+='<polygon points="'+n.x+","+n.y+" "+a.x+","+a.y+" "+o.x+","+o.y+'"',r+=t.fill?' fill="'+t.fill+'"':' fill="transparent"',t.strokeColor&&(r+=' stroke="'+t.strokeColor+'" stroke-width="'+t.strokeWidth+'" stroke-linejoin="'+t.lineJoin+'"'),r+="/>\n	"}),r+="\n</svg>"},e.exports=r["default"]},{}],11:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t,e,r){var n=0,a=void 0,o=void 0,i=r.fill,u="string"==typeof i?r.fill:!1,f=r.stroke,l="string"==typeof f?r.stroke:!1,s=r.strokeWidth,d=r.lineJoin,c=void 0,g=void 0,h=void 0;return t.forEach(function(t,r){a=.33333*(t.a.x+t.b.x+t.c.x),o=.33333*(t.a.y+t.b.y+t.c.y),n=(0|a)+(0|o)*e.width<<2,c=e.data[n],g=e.data[n+1],h=e.data[n+2],i&&(t.fill=u||"rgb("+c+", "+g+", "+h+")"),f&&(l?t.strokeColor=l:t.strokeColor="rgb("+c+", "+g+", "+h+")",t.strokeWidth=s,t.lineJoin=d)}),t},e.exports=r["default"]},{}],12:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t,e,r){var n,a,o,i,u,f,l,s,d,c=parseInt(10*(r||.1),10)||1,g=e,h=t.width,y=t.height,p=t.data,m=[];for(a=0;y>a;a+=c)for(n=0;h>n;n+=c){for(s=d=0,o=-1;1>=o;o++)if(f=a+o,l=f*h,f>=0&&y>f)for(i=-1;1>=i;i++)u=n+i,u>=0&&h>u&&(s+=p[u+l<<2],d++);d&&(s/=d),s>g&&m.push({x:n,y:a})}return m},e.exports=r["default"]},{}],13:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){return t.x*t.y-e.y*e.x}Object.defineProperty(r,"__esModule",{value:!0});var o=t("../util/clamp"),i=n(o);r["default"]=function(t,e,r,n,o){var u=[],f=2*Math.ceil(n/(100-r))+2*Math.ceil(o/(100-r))+2,l=Math.max(t.length,e),s=(0,i["default"])(l-f,0,e-f),d=l/s,c=0,g=0,h=0,y=0;for(t.sort(a),c=0,y=l;y>c;c+=d)u.push({x:t[~~c].x,y:t[~~c].y});for(g=0;n>g;g+=100-r)u.push({x:~~g,y:0}),u.push({x:~~g,y:o});for(h=0;o>h;h+=100-r)u.push({x:0,y:~~h}),u.push({x:n,y:~~h});return u.push({x:0,y:o}),u.push({x:n,y:o}),t=null,u},e.exports=r["default"]},{"../util/clamp":15}],14:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var a=t("stackblur-canvas"),o=n(a),i=t("delaunay-fast"),u=n(i),f=t("../util/isImageData"),l=n(f),s=t("../imagedata/copyImageData"),d=n(s),c=t("../imagedata/greyscale"),g=n(c),h=t("../imagedata/detectEdges"),y=n(h),p=t("./getEdgePoints"),m=n(p),v=t("./getVerticesFromPoints"),x=n(v),w=t("./addColorToPolygons"),b=n(w);r["default"]=function(t,e){if((0,l["default"])(t)){var r={width:t.width,height:t.height},n=(0,d["default"])(t),a=(0,d["default"])(t),i=o["default"].imageDataRGBA(n,0,0,r.width,r.height,e.blur),f=(0,g["default"])(i),s=(0,y["default"])(f),c=(0,m["default"])(s,50,e.accuracy),h=(0,x["default"])(c,e.vertexCount,e.accuracy,r.width,r.height),p=u["default"].triangulate(h);return(0,b["default"])(p,a,e)}throw new Error("Can't work with the imageData provided. It seems to be corrupt.")},e.exports=r["default"]},{"../imagedata/copyImageData":2,"../imagedata/detectEdges":3,"../imagedata/greyscale":4,"../util/isImageData":17,"./addColorToPolygons":11,"./getEdgePoints":12,"./getVerticesFromPoints":13,"delaunay-fast":20,"stackblur-canvas":21}],15:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t,e,r){return e>t?e:t>r?r:t},e.exports=r["default"]},{}],16:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t,e,r,n){return n=n||1,e.forEach(function(e,r){t.beginPath(),t.moveTo(e.a.x*n,e.a.y*n),t.lineTo(e.b.x*n,e.b.y*n),t.lineTo(e.c.x*n,e.c.y*n),t.lineTo(e.a.x*n,e.a.y*n),e.fill&&(t.fillStyle=e.fill,t.fill()),e.strokeColor&&(t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeWidth*n,t.lineJoin=e.lineJoin,t.stroke()),t.closePath()}),t},e.exports=r["default"]},{}],17:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t){return t&&"number"==typeof t.width&&"number"==typeof t.height&&t.data&&"number"==typeof t.data.length},e.exports=r["default"]},{}],18:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t){t.addEventListener("message",function(e){if(e.data.imageData&&e.data.params)try{var r=e.data.imageData;"undefined"==typeof r.width&&"number"==typeof e.data.imageDataWidth&&(r.width=e.data.imageDataWidth),"undefined"==typeof r.height&&"number"==typeof e.data.imageDataHeight&&(r.height=e.data.imageDataHeight);var n=(0,i["default"])(e.data.imageData,e.data.params);t.postMessage({polygonJSONStr:JSON.stringify(n)})}catch(a){t.postMessage({err:a.message||a})}else e.data.imageData?t.postMessage({err:"Parameters are missing."}):t.postMessage({err:"ImageData is missing."});t.close()})}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=a;var o=t("../polygons/imageDataToPolygons"),i=n(o);e.exports=r["default"]},{"../polygons/imageDataToPolygons":14}],19:[function(t,e,r){var n=e.exports=function(t,e){var r=document.createElement("canvas");return r.width=t||300,r.height=e||150,r};n.Image=function(){var t=document.createElement("img");return t}},{}],20:[function(t,e,r){function n(t,e,r){this.a=t,this.b=e,this.c=r;var n,a,o,i,u=e.x-t.x,f=e.y-t.y,l=r.x-t.x,s=r.y-t.y,d=u*(t.x+e.x)+f*(t.y+e.y),c=l*(t.x+r.x)+s*(t.y+r.y),g=2*(u*(r.y-e.y)-f*(r.x-e.x));Math.abs(g)<1e-6?(n=Math.min(t.x,e.x,r.x),a=Math.min(t.y,e.y,r.y),o=.5*(Math.max(t.x,e.x,r.x)-n),i=.5*(Math.max(t.y,e.y,r.y)-a),this.x=n+o,this.y=a+i,this.r=o*o+i*i):(this.x=(s*d-f*c)/g,this.y=(u*c-l*d)/g,o=this.x-t.x,i=this.y-t.y,this.r=o*o+i*i)}function a(t,e){return e.x-t.x}function o(t){var e,r,n,a,o,i=t.length;t:for(;i;)for(r=t[--i],e=t[--i],n=i;n;)if(o=t[--n],a=t[--n],e===a&&r===o||e===o&&r===a){t.splice(i,2),t.splice(n,2),i-=2;continue t}}function i(t){if(t.length<3)return[];t.sort(a);for(var e=t.length-1,r=t[e].x,i=t[0].x,u=t[e].y,f=u;e--;)t[e].y<u&&(u=t[e].y),t[e].y>f&&(f=t[e].y);var l,s,d,c=i-r,g=f-u,h=c>g?c:g,y=.5*(i+r),p=.5*(f+u),m=[new n({x:y-20*h,y:p-h,__sentinel:!0},{x:y,y:p+20*h,__sentinel:!0},{x:y+20*h,y:p-h,__sentinel:!0})],v=[],x=[];for(e=t.length;e--;){for(x.length=0,l=m.length;l--;)c=t[e].x-m[l].x,c>0&&c*c>m[l].r?(v.push(m[l]),m.splice(l,1)):(g=t[e].y-m[l].y,c*c+g*g>m[l].r||(x.push(m[l].a,m[l].b,m[l].b,m[l].c,m[l].c,m[l].a),m.splice(l,1)));for(o(x),l=x.length;l;)d=x[--l],s=x[--l],m.push(new n(s,d,t[e]))}for(Array.prototype.push.apply(v,m),e=v.length;e--;)(v[e].a.__sentinel||v[e].b.__sentinel||v[e].c.__sentinel)&&v.splice(e,1);return v}n.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.x,this.a.y),t.lineTo(this.b.x,this.b.y),t.lineTo(this.c.x,this.c.y),t.closePath(),t.stroke()},"undefined"!=typeof e&&(e.exports={Triangle:n,triangulate:i})},{}],21:[function(t,e,r){function n(t,e,r,n){if("string"==typeof t)var t=document.getElementById(t);else if(!t instanceof HTMLImageElement)return;var a=t.naturalWidth,i=t.naturalHeight;if("string"==typeof e)var e=document.getElementById(e);else if(!e instanceof HTMLCanvasElement)return;e.style.width=a+"px",e.style.height=i+"px",e.width=a,e.height=i;var f=e.getContext("2d");f.clearRect(0,0,a,i),f.drawImage(t,0,0),isNaN(r)||1>r||(n?o(e,0,0,a,i,r):u(e,0,0,a,i,r))}function a(t,e,r,n,a){if("string"==typeof t)var t=document.getElementById(t);else if(!t instanceof HTMLCanvasElement)return;var o,i=t.getContext("2d");try{try{o=i.getImageData(e,r,n,a)}catch(u){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=i.getImageData(e,r,n,a)}catch(u){throw alert("Cannot access local image"),new Error("unable to access local image data: "+u)}}}catch(u){throw alert("Cannot access image"),new Error("unable to access image data: "+u)}return o}function o(t,e,r,n,o,u){if(!(isNaN(u)||1>u)){u|=0;var f=a(t,e,r,n,o);f=i(f,e,r,n,o,u),t.getContext("2d").putImageData(f,e,r)}}function i(t,e,r,n,a,o){var i,u,f,c,g,h,y,p,m,v,x,w,b,_,M,D,P,k,C,I,O,j,T,S,E=t.data,N=o+o+1,W=n-1,R=a-1,L=o+1,U=L*(L+1)/2,J=new l,H=J;for(f=1;N>f;f++)if(H=H.next=new l,f==L)var B=H;H.next=J;var G=null,q=null;y=h=0;var A=s[o],V=d[o];for(u=0;a>u;u++){for(D=P=k=C=p=m=v=x=0,w=L*(I=E[h]),b=L*(O=E[h+1]),_=L*(j=E[h+2]),M=L*(T=E[h+3]),p+=U*I,m+=U*O,v+=U*j,x+=U*T,H=J,f=0;L>f;f++)H.r=I,H.g=O,H.b=j,H.a=T,H=H.next;for(f=1;L>f;f++)c=h+((f>W?W:f)<<2),p+=(H.r=I=E[c])*(S=L-f),m+=(H.g=O=E[c+1])*S,v+=(H.b=j=E[c+2])*S,x+=(H.a=T=E[c+3])*S,D+=I,P+=O,k+=j,C+=T,H=H.next;for(G=J,q=B,i=0;n>i;i++)E[h+3]=T=x*A>>V,0!=T?(T=255/T,E[h]=(p*A>>V)*T,E[h+1]=(m*A>>V)*T,E[h+2]=(v*A>>V)*T):E[h]=E[h+1]=E[h+2]=0,p-=w,m-=b,v-=_,x-=M,w-=G.r,b-=G.g,_-=G.b,M-=G.a,c=y+((c=i+o+1)<W?c:W)<<2,D+=G.r=E[c],P+=G.g=E[c+1],k+=G.b=E[c+2],C+=G.a=E[c+3],p+=D,m+=P,v+=k,x+=C,G=G.next,w+=I=q.r,b+=O=q.g,_+=j=q.b,M+=T=q.a,D-=I,P-=O,k-=j,C-=T,q=q.next,h+=4;y+=n}for(i=0;n>i;i++){for(P=k=C=D=m=v=x=p=0,h=i<<2,w=L*(I=E[h]),b=L*(O=E[h+1]),_=L*(j=E[h+2]),M=L*(T=E[h+3]),p+=U*I,m+=U*O,v+=U*j,x+=U*T,H=J,f=0;L>f;f++)H.r=I,H.g=O,H.b=j,H.a=T,H=H.next;for(g=n,f=1;o>=f;f++)h=g+i<<2,p+=(H.r=I=E[h])*(S=L-f),m+=(H.g=O=E[h+1])*S,v+=(H.b=j=E[h+2])*S,x+=(H.a=T=E[h+3])*S,D+=I,P+=O,k+=j,C+=T,H=H.next,R>f&&(g+=n);for(h=i,G=J,q=B,u=0;a>u;u++)c=h<<2,E[c+3]=T=x*A>>V,T>0?(T=255/T,E[c]=(p*A>>V)*T,E[c+1]=(m*A>>V)*T,E[c+2]=(v*A>>V)*T):E[c]=E[c+1]=E[c+2]=0,p-=w,m-=b,v-=_,x-=M,w-=G.r,b-=G.g,_-=G.b,M-=G.a,c=i+((c=u+L)<R?c:R)*n<<2,p+=D+=G.r=E[c],m+=P+=G.g=E[c+1],v+=k+=G.b=E[c+2],x+=C+=G.a=E[c+3],G=G.next,w+=I=q.r,b+=O=q.g,_+=j=q.b,M+=T=q.a,D-=I,P-=O,k-=j,C-=T,q=q.next,h+=n}return t}function u(t,e,r,n,o,i){if(!(isNaN(i)||1>i)){i|=0;var u=a(t,e,r,n,o);u=f(u,e,r,n,o,i),t.getContext("2d").putImageData(u,e,r)}}function f(t,e,r,n,a,o){var i,u,f,c,g,h,y,p,m,v,x,w,b,_,M,D,P,k,C,I,O=t.data,j=o+o+1,T=n-1,S=a-1,E=o+1,N=E*(E+1)/2,W=new l,R=W;for(f=1;j>f;f++)if(R=R.next=new l,f==E)var L=R;R.next=W;var U=null,J=null;y=h=0;var H=s[o],B=d[o];for(u=0;a>u;u++){for(_=M=D=p=m=v=0,x=E*(P=O[h]),w=E*(k=O[h+1]),b=E*(C=O[h+2]),p+=N*P,m+=N*k,v+=N*C,R=W,f=0;E>f;f++)R.r=P,R.g=k,R.b=C,R=R.next;for(f=1;E>f;f++)c=h+((f>T?T:f)<<2),p+=(R.r=P=O[c])*(I=E-f),m+=(R.g=k=O[c+1])*I,v+=(R.b=C=O[c+2])*I,_+=P,M+=k,D+=C,R=R.next;for(U=W,J=L,i=0;n>i;i++)O[h]=p*H>>B,O[h+1]=m*H>>B,O[h+2]=v*H>>B,p-=x,m-=w,v-=b,x-=U.r,w-=U.g,b-=U.b,c=y+((c=i+o+1)<T?c:T)<<2,_+=U.r=O[c],M+=U.g=O[c+1],D+=U.b=O[c+2],p+=_,m+=M,v+=D,U=U.next,x+=P=J.r,w+=k=J.g,b+=C=J.b,_-=P,M-=k,D-=C,J=J.next,h+=4;y+=n}for(i=0;n>i;i++){for(M=D=_=m=v=p=0,h=i<<2,x=E*(P=O[h]),w=E*(k=O[h+1]),b=E*(C=O[h+2]),p+=N*P,m+=N*k,v+=N*C,R=W,f=0;E>f;f++)R.r=P,R.g=k,R.b=C,R=R.next;for(g=n,f=1;o>=f;f++)h=g+i<<2,p+=(R.r=P=O[h])*(I=E-f),m+=(R.g=k=O[h+1])*I,v+=(R.b=C=O[h+2])*I,_+=P,M+=k,D+=C,R=R.next,S>f&&(g+=n);for(h=i,U=W,J=L,u=0;a>u;u++)c=h<<2,O[c]=p*H>>B,O[c+1]=m*H>>B,O[c+2]=v*H>>B,p-=x,m-=w,v-=b,x-=U.r,w-=U.g,b-=U.b,c=i+((c=u+E)<S?c:S)*n<<2,p+=_+=U.r=O[c],m+=M+=U.g=O[c+1],v+=D+=U.b=O[c+2],U=U.next,x+=P=J.r,w+=k=J.g,b+=C=J.b,_-=P,M-=k,D-=C,J=J.next,h+=n}return t}function l(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],d=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports={image:n,canvasRGBA:o,canvasRGB:u,imageDataRGBA:i,imageDataRGB:f}},{}],22:[function(t,e,r){var n=arguments[3],a=arguments[4],o=arguments[5],i=JSON.stringify;e.exports=function(t){for(var e,r=Object.keys(o),u=0,f=r.length;f>u;u++){var l=r[u],s=o[l].exports;if(s===t||s["default"]===t){e=l;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},u=0,f=r.length;f>u;u++){var l=r[u];d[l]=l}a[e]=[Function(["require","module","exports"],"("+t+")(self)"),d]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[e]=e,a[c]=[Function(["require"],"var f = require("+i(e)+");(f.default ? f.default : f)(self);"),g];var h="("+n+")({"+Object.keys(a).map(function(t){return i(t)+":["+a[t][0]+","+i(a[t][1])+"]"}).join(",")+"},{},["+i(c)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(y.createObjectURL(new Blob([h],{type:"text/javascript"})))}},{}]},{},[1])(1)});
